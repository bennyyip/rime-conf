# Rime schema
# encoding: utf-8

schema:
  schema_id: jjsp
  name: ç²µèªä¸‰æ‹¼
  version: '2022.06.07'
  author:
    - Ayaka Mikazuki <ayaka@mail.shn.hk>
    - LeiMaau <leimaau@qq.com>
    - chaaklau <chaakming@gmail.com>
    - laubonghaudoi <laubonghaudoi@icloud.com>
    - tanxpyox <tanxpyox@gmail.com>
    - William915 <William915@gmail.com>
    - szc126 (@szc126)
    - Bing Jeung <bing@ososo.io>
    - graphemecluster <graphemecluster@gmail.com>

  description: |-
    æ¡ç”¨é¦™æ¸¯èªè¨€å­¸å­¸æœƒç²µèªæ‹¼éŸ³æ–¹æ¡ˆ
    https://www.lshk.org/jyutping
    æ”¯æ´è²èª¿é¡¯ç¤ºåŒè¼¸å…¥
    Telegram ç”¨æˆ·äº¤æµçµ„ https://t.me/rime_cantonese

  dependencies:
    - melt_eng # è‹±æ–‡è¾“å…¥ï¼Œä½œä¸ºæ¬¡ç¿»è¯‘å™¨æŒ‚è½½åˆ°æ‹¼éŸ³æ–¹æ¡ˆ
    - luna_pinyin

switches:
  - name: ascii_mode
    reset: 0
    states: [ç²µèª, è¥¿æ–‡]
  - options: [noop, variants_hk, trad_tw, simplification]
    states: [å‚³çµ±æ¼¢å­—, é¦™æ¸¯å‚³çµ±æ¼¢å­—, è‡ºç£å‚³çµ±æ¼¢å­—, å¤§é™†ç®€åŒ–æ±‰å­—]
    # ä¿®æ”¹ä¸‹è¡Œï¼Œæ”¹è®Šé è¨­ç”¨å­— [0, 1, 2, 3 --> å°æ‡‰ä¸Šè¡¨]
    # Edit the following line to change the default character style
    #    [0 = OpenCC Traditional Chinese; 1 = Hong Kong TC; 2 = Taiwan TC; 3 = Mainland Simplified Chinese]
    # Or remove to remember user setting
    reset: 1
  - name: ascii_punct
    states: [ã€‚ï¼Œ, ï¼ï¼Œ]
  - name: emoji
    reset: 0
    states: [ğŸ’€, ğŸ˜„]
  - name: full_shape
    states: [åŠè§’, å…¨è§’]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@luna_pinyin
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - script_translator
    - script_translator@luna_pinyin
    - table_translator@melt_eng # è‹±æ–‡è¾“å…¥
  filters:
    - simplifier@variants_hk
    - simplifier@trad_tw
    - simplifier
    - simplifier@emoji
    - uniquifier
    - reverse_lookup_filter@jyut6ping3_reverse_lookup

# https://humanum.arts.cuhk.edu.hk/Lexis/lexi-mf/syllables.php
# https://github.com/rime/home/wiki/SpellingAlgebra
speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba;
  # initials: zwutsponmlkjihgfdcba
  delimiter: " '"
  algebra:
    - xform/([123456])//

    - xform/^gw/X/
    - xform/^kw/Q/
    - xform/^ng/R/

    - derive/^ap$/AP/
    - derive/^ak$/AK/
    - derive/^on$/ON/
    - derive/^ng$/NG/
    - derive/^oi$/OI/
    - derive/^au$/AU/
    - derive/^ou$/OU/
    - derive/^ei$/EI/
    - derive/^uk$/UK/
    - derive/^aa$/AA/
    - derive/^am$/AM/
    - derive/^ok$/OK/
    - derive/^ai$/AI/
    - derive/^o$/OO/
    - derive/^e$/EE/

    - xform/^([aeiou])/E$1/

    - xform/(.)oeng$/$1T/
    - xform/(.)aang$/$1J;/
    - xform/(.)ong$/$1G/
    - xform/(.)yut$/$1R;/
    - xform/(.)aai$/$1D/
    - xform/(.)eon$/$1P;/
    - xform/(.)aap$/$1D;/
    - xform/(.)eot$/$1U;/
    - xform/(.)aam$/$1H/
    - xform/(.)aan$/$1J/
    - xform/(.)yun$/$1Y/
    - xform/(.)oek$/$1;;/
    - xform/(.)aat$/$1N;/
    - xform/(.)eoi$/$1X/
    - xform/(.)aak$/$1Z;/
    - xform/(.)eng$/$1K;/
    - xform/(.)ang$/$1H;/
    - xform/(.)ung$/$1S/
    - xform/(.)ing$/$1K/
    - xform/(.)aau$/$1O;/
    - xform/(.)oet$/$1;;/
    - xform/(.)un$/$1Y;/
    - xform/(.)em$/$1M;/
    - xform/(.)ut$/$1T;/
    - xform/(.)ap$/$1T;/
    - xform/(.)ak$/$1A;/
    - xform/(.)on$/$1O/
    - xform/(.)ek$/$1;;/
    - xform/(.)ot$/$1G;/
    - xform/(.)oe$/$1T/
    - xform/(.)eu$/$1Q/
    - xform/(.)et$/$1I;/
    - xform/(.)ip$/$1M;/
    - xform/(.)it$/$1I;/
    - xform/(.)ui$/$1V;/
    - xform/(.)oi$/$1X;/
    - xform/(.)au$/$1C/
    - xform/(.)an$/$1F/
    - xform/(.)ou$/$1E/
    - xform/(.)ei$/$1W/
    - xform/(.)in$/$1B/
    - xform/(.)iu$/$1Q/
    - xform/(.)uk$/$1R/
    - xform/(.)ik$/$1;/
    - xform/(.)aa$/$1A/
    - xform/(.)am$/$1Z/
    - xform/(.)yu$/$1V/
    - xform/(.)at$/$1N/
    - xform/(.)ok$/$1P/
    - xform/(.)im$/$1M/
    - xform/(.)ai$/$1L/
    - xform/(.)ep$/$1B;/
    - xform/(.)e$/$1E;/

    - xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/
    - derive/^([a-z|;]{2});/$1/
    - xform/^(m|r)$/$1$1/        #mm->[m], rr->[ng].

translator:
  dictionary: jyut6ping3
  prism: jjsp
  spelling_hints: 8 # å°‡å‘¢åº¦æ”¹ä½œ 0ï¼Œå¯ä»¥å»é™¤å€™é¸å­—å¾Œé‚Šå˜…ç²µæ‹¼æç¤º
  enable_user_dict: true
  # enable_completion:false
  enable_sentence: true
  initial_quality: 1.2
  # strict_spelling: false

  # TODO
  preedit_format: {}

luna_pinyin:
  tag: luna_pinyin
  dictionary: luna_pinyin
  prefix: '`'
  suffix: ';'
  tips: ã€”æ™®é€šè©±ã€•
  preedit_format:
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/

jyut6ping3_reverse_lookup:
  tags: [luna_pinyin]
  overwrite_comment: false
  dictionary: jyut6ping3

variants_hk:
  option_name: variants_hk
  opencc_config: t2hkf.json

trad_tw:
  option_name: trad_tw
  opencc_config: t2tw.json

emoji:
  opencc_config: emoji.json
  option_name: emoji
  tips: all

punctuator:
  import_preset: symbols_cantonese

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    punct: '^/([0-9]0?|[a-z]+)$'
    luna_pinyin: "^`[a-z']*;?$"

# æ¬¡ç¿»è¯‘å™¨ï¼Œè‹±æ–‡
melt_eng:
  dictionary: melt_eng # æŒ‚è½½è¯åº“ melt_eng.dict.yaml
  enable_sentence: false # ç¦æ­¢é€ å¥
  enable_user_dict: false # ç¦ç”¨ç”¨æˆ·è¯å…¸
  initial_quality: 1.1 # åˆå§‹æƒé‡
  comment_format: # è‡ªå®šä¹‰æç¤ºç 
    - xform/.*// # æ¸…ç©ºæç¤ºç 
